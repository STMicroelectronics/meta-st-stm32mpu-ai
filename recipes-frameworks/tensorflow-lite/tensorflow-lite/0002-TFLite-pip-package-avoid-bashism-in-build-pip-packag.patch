From 32d1f8e62b5e1cbc9e57690f37e06fc62421de8d Mon Sep 17 00:00:00 2001
From: Vincent ABRIOU <vincent.abriou@st.com>
Date: Wed, 12 Feb 2020 10:03:23 +0100
Subject: [PATCH 2/6] TFLite: pip package: avoid bashism in build pip package
 script

Remove bashism in the script to avoid the script to crash when the build
is executed on a machine with a dash shell.

Signed-off-by: Vincent ABRIOU <vincent.abriou@st.com>
---
 tensorflow/lite/tools/pip_package/build_pip_package.sh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/tensorflow/lite/tools/pip_package/build_pip_package.sh b/tensorflow/lite/tools/pip_package/build_pip_package.sh
index df5423e411..488945cdf5 100755
--- a/tensorflow/lite/tools/pip_package/build_pip_package.sh
+++ b/tensorflow/lite/tools/pip_package/build_pip_package.sh
@@ -16,7 +16,7 @@
 set -e
 set -x
 
-SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
+SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
 PYTHON="${PYTHON:-python3}"
 VERSION_SUFFIX=${VERSION_SUFFIX:-}
 export TENSORFLOW_DIR="${SCRIPT_DIR}/../../../.."
@@ -54,18 +54,18 @@ case "${TENSORFLOW_TARGET}" in
 esac
 
 # Build debian package.
-if [[ "${BUILD_DEB}" != "y" ]]; then
+if [ "${BUILD_DEB}" != "y" ]; then
   exit 0
 fi
 
 PYTHON_VERSION=$(${PYTHON} -c "import sys;print(sys.version_info.major)")
-if [[ ${PYTHON_VERSION} != 3 ]]; then
+if [ ${PYTHON_VERSION} != 3 ]; then
   echo "Debian package can only be generated for python3." >&2
   exit 1
 fi
 
 DEB_VERSION=$(dpkg-parsechangelog --show-field Version | cut -d- -f1)
-if [[ "${DEB_VERSION}" != "${PACKAGE_VERSION}" ]]; then
+if [ "${DEB_VERSION}" != "${PACKAGE_VERSION}" ]; then
   cat << EOF > "${BUILD_DIR}/debian/changelog"
 tflite-runtime (${PACKAGE_VERSION}-1) unstable; urgency=low
 
-- 
2.17.1

